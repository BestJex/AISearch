<!DOCTYPE html>
<html>
<head>
    <!-- 引入样式 -->
    <link rel="stylesheet" href="/css/element-ui.min.css">
    <link rel="stylesheet" href="/css/font-awesome-4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="/css/my-select.css">
    <style>
        .search {
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }

    </style>
</head>
<body>
<div id="app" class="search" style="display: none">
    <div  @click="toggle" @keyup.enter="toDetail(store.keyword)">
        <el-input  id="el-input" style="width: 500px;" @input="searchItem(store.keyword)" placeholder="搜你想要"
                  v-model="store.keyword">
        </el-input>

        <ul style="position: absolute;" v-show="isShow">
            <li @click="upScreen(item.title)" v-for="item in store.article" :value="item.id"
                :style="{width : width +'px'}">
                {{item.title}}
            </li>
        </ul>
    </div>

    <el-button @click="toDetail(store.keyword)">{{message}}</el-button>

</div>
</body>
<script src="/js/jquery-1.9.1.min.js"></script>
<script src="/js/vue.min.js" type="text/javascript"></script>
<script src="/js/element-ui.min.js" type="text/javascript"></script>
<script src="/js/my-select.js" type="text/javascript"></script>

<script>
    var store = {visible: false, width: 0, message: 'AISearch', keyword: "", isShow: false, article: []};
    var app = new Vue({
        el: '#app',
        data: store,
        created: function () {
            $("#app").show();
            this.width = $("#el-input").width();

        },
        methods: {
            toggle:function () {
                this.isShow = !this.isShow;
            },
            blur: function () {
                this.isShow = false;
            },
            toDetail: function (keyword) {
                if (keyword != "") {
                    window.location.href = "todetail2?keyword=" + keyword;
                }

            },
            upScreen: function (label) {
                store.keyword = label;
            },
            searchItem: function (keyword) {
                this.isShow = true;
                $.ajax({
                    url: "/searchItem", data: {keyword: keyword}, success: function (data) {
                        store.article = [];
                        for (var i = 0; i < data.length; i++) {
                            store.article.push(data[i]);
                        }
                    }
                });
            }
            ,
        }

    })

</script>
</html>